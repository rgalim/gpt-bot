# GPT Bot

## Project Overview

GPT Bot is a Spring Boot application designed to integrate with Telegram and OpenAI's API to provide a chatbot experience. The bot listens for updates from Telegram, processes commands and messages, and interacts with OpenAI to generate responses. It supports user validation and token authentication to ensure secure communication.

## Installation Instructions

### Prerequisites

- Java 17 or higher
- A Telegram Bot token
- OpenAI API key

### Steps

1. **Clone the Repository:**

   ```bash
   git clone https://github.com/your-repo/gpt-bot.git
   cd gpt-bot
   ```

2. **Configure Environment Variables:**

   Set the following environment variables:

   - `TELEGRAM_URL`: The base URL for Telegram API.
   - `TELEGRAM_BOT_TOKEN`: Your Telegram bot token.
   - `TELEGRAM_BOT_SECRET`: A secret token for authenticating incoming requests.
   - `REGISTERED_USERS`: Comma-separated list of authorized user IDs.
   - `OPENAI_API_KEY`: Your OpenAI API key.
   - `OPENAI_INPUT_TOKEN_LIMIT`: The maximum token limit for OpenAI input.

3. **Build the Project:**
   ```bash
   ./gradlew build
   ```

4. **Run the Application:**
   ```bash
   ./gradlew run
   ```

## Configuration and Key Components

### Configuration

The application is configured using `application.yml`, which includes settings for the Telegram API, authentication, and OpenAI integration:

```yaml
telegram:
  url: http://telegram-url.com
  bot-token: botToken
  bot-secret: botSecret
  timeout: 30
  retry-attempts: 2
  retry-backoff: 100

auth:
  users: user1,user2

openai:
  api-key: openAiKey
  input-token-limit: 10
```

### Key Components

- **`GptBotApplication`**: The main entry point of the application, enabling configuration properties for authentication.
  
- **`TelegramApiClient`**: Handles communication with the Telegram API, including fetching updates and sending messages.

- **`TelegramBotController`**: Manages incoming updates from Telegram, validates tokens, and delegates handling to services.

- **`AuthService`**: Validates user IDs against a list of registered users.

- **`OpenAiService`**: Interacts with OpenAI's API to send prompts and receive responses.

- **`TelegramBotService`**: Processes updates from Telegram, handles commands and messages, and manages update offsets.

The README.md file is generated by the [readme-agent](https://github.com/rgalim/readme-agent)